<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Move Motorcycles Watermark Test</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body, #map { height: 100%; margin: 0; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
  const map = L.map('map').setView([52.8,-1.6],6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);

  // --- Move Motorcycles watermark layer (guaranteed method) ---
  const WatermarkLayer = L.Layer.extend({
    onAdd: function(map) {
      const pane = map.getPanes().overlayPane;
      const div = L.DomUtil.create('div', 'move-watermark', pane);
      Object.assign(div.style, {
        position: 'absolute',
        top: 0, left: 0, right: 0, bottom: 0,
        backgroundImage: "url('Move%20Motorcycles%20Blue.png')",
        backgroundRepeat: 'repeat',
        backgroundSize: '220px auto',
        opacity: 0.25,
        transform: 'rotate(-25deg)',
        transformOrigin: 'center center',
        pointerEvents: 'none'
      });
      this._div = div;
      map.on('move zoom', this._update, this);
      this._update();
    },
    onRemove: function(map) {
      map.off('move zoom', this._update, this);
      if (this._div && this._div.parentNode) {
        this._div.parentNode.removeChild(this._div);
      }
    },
    _update: function() {
      if (!this._div) return;
      const size = this._map.getSize();
      this._div.style.width = size.x + 'px';
      this._div.style.height = size.y + 'px';
    }
  });
  new WatermarkLayer().addTo(map);
  </script>
</body>
</html>
